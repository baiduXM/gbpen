
<div class="jumbotron text-center">
    <div id="material" class="whole">
        <div class="mate-top clearfix">
            <a class="inline-block fl addmeg" href=""><img src="images/add.png" />单图文消息</a>
            <a class="inline-block fl addmegs" href=""><img src="images/add.png" />多图文消息</a>
            <a class="inline-block fl addvideo" href=""><img src="images/add.png" />语音消息</a>
        </div>
        <input type="text" value="美女" class="fr select-txt" />
        <div class="fr selects"><img src="images/select.png" style="margin-left:5px;" /></div>
        <div class="fr enter" ><img src="images/enter.png" /></div>
        <hr style="margin-top: 20px;"/>
        <p class="hint">以下显示是通过搜索“美女”关键字，所得出的结果！</p>       
    </div>
    <div class="materialbox" id="materialbox">
    <ul>
        <li>
    	<div class="materlist">
        
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/msg_img.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr">9月3日，百度世界大会拉开帷幕，一度颇为神秘的“百度筷搜。</dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
        </li>
        <li>
        <div class="materlist">
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/msg_img.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr1">
                	<table width="100%" border="0">
  <tr>
    <td><dd>犀利的化工厂成功后通常独唱团。</dd></td>
    <td><img src="images/msg_img.jpg" alt="" width="100" height="100" style="padding-left:8px;"></td>
  </tr>
</table>

                </dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
        </li>
        <li>
        
        <div class="materlist">
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/video.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr">9月3日，百度世界大会拉开帷幕，一度颇为神秘的“百度筷搜。</dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
        </li>
        <li>
        <div class="materlist">
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/msg_img.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr">9月3日，百度世界大会拉开帷幕，一度颇为神秘的“百度筷搜。</dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
        </li>
        <li>
        <div class="materlist">
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/msg_img.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr1">
                	<table width="100%" border="0">
  <tr>
    <td><dd>犀利的化工厂成功后通常独唱团。</dd></td>
    <td><img src="images/msg_img.jpg" alt="" width="100" height="100" style="padding-left:8px;"></td>
  </tr>
</table>

                </dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
        
        </li>
        <li>
        <div class="materlist">
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/video.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr">9月3日，百度世界大会拉开帷幕，一度颇为神秘的“百度筷搜。</dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
        </li>
        <li>
        <div class="materlist">
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/msg_img.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr">9月3日，百度世界大会拉开帷幕，一度颇为神秘的“百度筷搜。</dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
        </li>
        <li>
        <div class="materlist">
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/msg_img.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr1">
                	<table width="100%" border="0">
  <tr>
    <td><dd>犀利的化工厂成功后通常独唱团。</dd></td>
    <td><img src="images/msg_img.jpg" alt="" width="100" height="100" style="padding-left:8px;"></td>
  </tr>
</table>

                </dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
        
        </li>
        <li>
        <div class="materlist">
        	<div class="materlist-first">
            	<dt class="title">犀利的化工厂成功后通常独唱团</dt>
                <dt class="date">2013年12月18日</dt>
                <dd class="msgimg">
                <img src="images/video.jpg" alt="" width="100%">
                <p class="title1">犀利的化工厂成功后通常独唱团</p>
                </dd>
                <dd class="nr">9月3日，百度世界大会拉开帷幕，一度颇为神秘的“百度筷搜。</dd>
                <div class="concrol">
                	<dl><dd class="zz"></dd><dd class="concrol-edite"><i class="icon-iconfont-bianji"></i></dd></dl>
                	<dl class="i1"><dd class="zz"></dd><dd class="concrol-del"><i class="icon-iconfont-shanchu"></i></dd></dl> 
                </div>
                
            </div>
            <div class="del-box">
                	<span class="del-sanjiao"></span>
                    <dd class="del-btn">删除</dd>
            </div>
            <div class="materlist-secondbox">
            <span class="sanjiao"></span>
            <div class="materlist-second">
            	<dt class="title">编辑名称</dt>
                <dd class="input"><input name="" type="text"  /></dd>
                <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
            </div>
            </div>
            <div class="detailbox">
            	<span class="sanjiao"></span>
            	<div class="detailbox-main">
                	<dt class="title">确定删除此素材？</dt>
                    <dl class="btnbox">
                	<dd class="surebtn">确定</dd>
                    <dd class="cancebtn">取消</dd>
                </dl>
                </div>
            </div>
        </div>
       </li>
        
        
        </ul>
    </div>
</div>

<script type="text/javascript">
/*
原理：1.把所有的li的高度值放到数组里面
     2.第一行的top都为0
	 3.计算高度值最小的值是哪个li
	 4.把接下来的li放到那个li的下面
作者：刘晓帆
博客地址：[url]http://liuxiaofan.com[/url]
编写时间：2012年6月9日
*/
//取区块的实际宽度（包含间距，这里使用源生的offsetWidth函数，不适用jQuery的width()函数是因为它不能取得实际宽度，例如元素内有pandding就不行了）

function liuxiaofan(){//定义成函数便于调用
	var h=[];//记录区块高度的数组
	var margin = 0;//这里设置间距
	var li=$(".materialbox li");//这里是区块名称
	var	li_W = li[0].offsetWidth+margin;
    var img=new Image();
        img.src=$(".materialbox img").attr("src");

	
	//窗口的宽度除以区块宽度就是一行能放几个区块
	if($(".materialbox").width()>1540)
	{ var n = 5;
	$(".materialbox li").css({"width":20+"%"})}
	else if($(".materialbox").width()>1232)
	{var n = 4;
	$(".materialbox li").css({"width":25+"%"})}
	else if($(".materialbox").width()>924)
	{var n = 3
	$(".materialbox li").css({"width":33+"%"})}
	else{var n = 2
	$(".materialbox li").css({"width":50+"%"})}

	
	for(var i = 0;i < li.length;i++) {//有多少个li就循环多少次
		li_H = li[i].offsetHeight;//获取每个li的高度
		if(i < n) {//n是一行最多的li，所以小于n就是第一行了
			
			h[i]=li_H;//把每个li放到数组里面
			li.eq(i).css("top",0);//第一行的Li的top值为0			
			li.eq(i).css("left",i * li_W);//第i个li的左坐标就是i*li的宽度
			}
		else{
			min_H =Math.min.apply(null,h) ;//取得数组中的最小值，区块中高度值最小的那个
			minKey = getarraykey(h, min_H);//最小的值对应的指针
			h[minKey] += li_H+margin ;//加上新高度后更新高度值
			li.eq(i).css("top",min_H+margin);//先得到高度最小的Li，然后把接下来的li放到它的下面
			li.eq(i).css("left",minKey * li_W);	//第i个li的左坐标就是i*li的宽度
		}
		
	}
    $(".materialbox").height($(".materialbox li:last").offset().top + $(".materialbox li:last").height())
    $(".materialbox").width($(".jumbotron ").width()-20)
	
}
/* 使用for in运算返回数组中某一值的对应项数(比如算出最小的高度值是数组里面的第几个) */
function getarraykey(s, v) {for(k in s) {if(s[k] == v) {return k;}}}
/*这里一定要用onload，因为图片不加载完就不知道
高度值*/
liuxiaofan();
/*浏览器窗口改变时也运行函数*/
window.onresize = function() {liuxiaofan();};
</script>

<script>


$(".concrol-del").hover(function(){
	$(this).parents(".materlist").find(".del-box").slideDown(function(){liuxiaofan();}
	)
},function(){
	$(this).parents(".materlist").find(".del-box").slideUp(function(){liuxiaofan();})
})
$(".concrol-del").on('click',function(){
	$(this).parents(".materlist").find(".detailbox").slideDown(function(){liuxiaofan();});
	$(this).parents(".concrol").find(".zz").show()
	})
$(".concrol-edite").click(function(){
	$(this).parents(".materlist").find(".materlist-secondbox").slideDown(function(){liuxiaofan();});
	$(this).parents(".concrol").find(".zz").show()
	})
$(".cancebtn").click(function(){
	$(this).parents(".materlist").find(".materlist-secondbox,.detailbox").slideUp(function(){liuxiaofan();})
	$(this).parents(".materlist").find(".zz").hide()
	})

</script>
